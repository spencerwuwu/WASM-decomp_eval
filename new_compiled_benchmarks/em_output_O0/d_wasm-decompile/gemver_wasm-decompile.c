import memory env_memory;

import global stack_pointer:int;
import global memory_base:int;
import global table_base:int;
import global stderr:int;

data rodata(offset: memory_base) =
  "w\00begin dump: %s\00%0.2lf \00\0aend   dump: %s\0a\00==BEGIN DUMP_ARR"
  "AYS==\0a\00==END   DUMP_ARRAYS==\0a\00";

import function strcmp(a:int, b:int):int;

import function free(a:int);

import function fprintf(a:int, b:int, c:int):int;

import function legalimport_polybench_alloc_data(a:int, b:int, c:int):int;

export function wasm_call_ctors() {
}

export function wasm_apply_data_relocs() {
}

export function kernel_gemver(a:int, b:double, c:double, d:int, e:int, f:int, g:int, h:int, i:int, j:int, k:int, l:int) {
  var m:int = stack_pointer;
  var n:int = 80;
  var o:int = m - n;
  o[19]:int = a;
  o[8]:double = b;
  o[7]:double = c;
  o[13]:int = d;
  o[12]:int = e;
  o[11]:int = f;
  o[10]:int = g;
  o[9]:int = h;
  o[8]:int = i;
  o[7]:int = j;
  o[6]:int = k;
  o[5]:int = l;
  var p:int = 0;
  o[4]:int = p;
  loop L_b {
    var q:int = o[4]:int;
    var r:int = o[19]:int;
    var s:int = q;
    var t:int = r;
    var u:int = s < t;
    var v:int = 1;
    var w:int = u & v;
    if (eqz(w)) goto B_a;
    var x:int = 0;
    o[3]:int = x;
    loop L_d {
      var y:int = o[3]:int;
      var z:int = o[19]:int;
      var aa:int = y;
      var ba:int = z;
      var ca:int = aa < ba;
      var da:int = 1;
      var ea:int = ca & da;
      if (eqz(ea)) goto B_c;
      var fa:int = o[13]:int;
      var ga:int = o[4]:int;
      var ha:int = 16000;
      var ia:int = ga * ha;
      var ja:int = fa + ia;
      var ka:int = o[3]:int;
      var la:int = 3;
      var ma:int = ka << la;
      var na:double_ptr = ja + ma;
      var oa:double = na[0];
      var pa:int = o[12]:int;
      var qa:int = o[4]:int;
      var ra:int = 3;
      var sa:int = qa << ra;
      var ta:double_ptr = pa + sa;
      var ua:double = ta[0];
      var va:int = o[11]:int;
      var wa:int = o[3]:int;
      var xa:int = 3;
      var ya:int = wa << xa;
      var za:double_ptr = va + ya;
      var ab:double = za[0];
      var bb:double = ua * ab;
      var cb:double = bb + oa;
      var db:int = o[10]:int;
      var eb:int = o[4]:int;
      var fb:int = 3;
      var gb:int = eb << fb;
      var hb:double_ptr = db + gb;
      var ib:double = hb[0];
      var jb:int = o[9]:int;
      var kb:int = o[3]:int;
      var lb:int = 3;
      var mb:int = kb << lb;
      var nb:double_ptr = jb + mb;
      var ob:double = nb[0];
      var pb:double = ib * ob;
      var qb:double = pb + cb;
      var rb:int = o[13]:int;
      var sb:int = o[4]:int;
      var tb:int = 16000;
      var ub:int = sb * tb;
      var vb:int = rb + ub;
      var wb:int = o[3]:int;
      var xb:int = 3;
      var yb:int = wb << xb;
      var zb:double_ptr = vb + yb;
      zb[0] = qb;
      var ac:int = o[3]:int;
      var bc:int = 1;
      var cc:int = ac + bc;
      o[3]:int = cc;
      continue L_d;
    }
    unreachable;
    label B_c:
    var dc:int = o[4]:int;
    var ec:int = 1;
    var fc:int = dc + ec;
    o[4]:int = fc;
    continue L_b;
  }
  unreachable;
  label B_a:
  var gc:int = 0;
  o[4]:int = gc;
  loop L_f {
    var hc:int = o[4]:int;
    var ic:int = o[19]:int;
    var jc:int = hc;
    var kc:int = ic;
    var lc:int = jc < kc;
    var mc:int = 1;
    var nc:int = lc & mc;
    if (eqz(nc)) goto B_e;
    var oc:int = 0;
    o[3]:int = oc;
    loop L_h {
      var pc:int = o[3]:int;
      var qc:int = o[19]:int;
      var rc:int = pc;
      var sc:int = qc;
      var tc:int = rc < sc;
      var uc:int = 1;
      var vc:int = tc & uc;
      if (eqz(vc)) goto B_g;
      var wc:int = o[7]:int;
      var xc:int = o[4]:int;
      var yc:int = 3;
      var zc:int = xc << yc;
      var ad:double_ptr = wc + zc;
      var bd:double = ad[0];
      var cd:double = o[7]:double;
      var dd:int = o[13]:int;
      var ed:int = o[3]:int;
      var fd:int = 16000;
      var gd:int = ed * fd;
      var hd:int = dd + gd;
      var id:int = o[4]:int;
      var jd:int = 3;
      var kd:int = id << jd;
      var ld:double_ptr = hd + kd;
      var md:double = ld[0];
      var nd:double = cd * md;
      var od:int = o[6]:int;
      var pd:int = o[3]:int;
      var qd:int = 3;
      var rd:int = pd << qd;
      var sd:double_ptr = od + rd;
      var td:double = sd[0];
      var ud:double = nd * td;
      var vd:double = ud + bd;
      var wd:int = o[7]:int;
      var xd:int = o[4]:int;
      var yd:int = 3;
      var zd:int = xd << yd;
      var ae:double_ptr = wd + zd;
      ae[0] = vd;
      var be:int = o[3]:int;
      var ce:int = 1;
      var de:int = be + ce;
      o[3]:int = de;
      continue L_h;
    }
    unreachable;
    label B_g:
    var ee:int = o[4]:int;
    var fe:int = 1;
    var ge:int = ee + fe;
    o[4]:int = ge;
    continue L_f;
  }
  unreachable;
  label B_e:
  var he:int = 0;
  o[4]:int = he;
  loop L_j {
    var ie:int = o[4]:int;
    var je:int = o[19]:int;
    var ke:int = ie;
    var le:int = je;
    var me:int = ke < le;
    var ne:int = 1;
    var oe:int = me & ne;
    if (eqz(oe)) goto B_i;
    var pe:int = o[7]:int;
    var qe:int = o[4]:int;
    var re:int = 3;
    var se:int = qe << re;
    var te:double_ptr = pe + se;
    var ue:double = te[0];
    var ve:int = o[5]:int;
    var we:int = o[4]:int;
    var xe:int = 3;
    var ye:int = we << xe;
    var ze:double_ptr = ve + ye;
    var af:double = ze[0];
    var bf:double = ue + af;
    var cf:int = o[7]:int;
    var df:int = o[4]:int;
    var ef:int = 3;
    var ff:int = df << ef;
    var gf:double_ptr = cf + ff;
    gf[0] = bf;
    var hf:int = o[4]:int;
    var if:int = 1;
    var jf:int = hf + if;
    o[4]:int = jf;
    continue L_j;
  }
  unreachable;
  label B_i:
  var kf:int = 0;
  o[4]:int = kf;
  loop L_l {
    var lf:int = o[4]:int;
    var mf:int = o[19]:int;
    var nf:int = lf;
    var of:int = mf;
    var pf:int = nf < of;
    var qf:int = 1;
    var rf:int = pf & qf;
    if (eqz(rf)) goto B_k;
    var sf:int = 0;
    o[3]:int = sf;
    loop L_n {
      var tf:int = o[3]:int;
      var uf:int = o[19]:int;
      var vf:int = tf;
      var wf:int = uf;
      var xf:int = vf < wf;
      var yf:int = 1;
      var zf:int = xf & yf;
      if (eqz(zf)) goto B_m;
      var ag:int = o[8]:int;
      var bg:int = o[4]:int;
      var cg:int = 3;
      var dg:int = bg << cg;
      var eg:double_ptr = ag + dg;
      var fg:double = eg[0];
      var gg:double = o[8]:double;
      var hg:int = o[13]:int;
      var ig:int = o[4]:int;
      var jg:int = 16000;
      var kg:int = ig * jg;
      var lg:int = hg + kg;
      var mg:int = o[3]:int;
      var ng:int = 3;
      var og:int = mg << ng;
      var pg:double_ptr = lg + og;
      var qg:double = pg[0];
      var rg:double = gg * qg;
      var sg:int = o[7]:int;
      var tg:int = o[3]:int;
      var ug:int = 3;
      var vg:int = tg << ug;
      var wg:double_ptr = sg + vg;
      var xg:double = wg[0];
      var yg:double = rg * xg;
      var zg:double = yg + fg;
      var ah:int = o[8]:int;
      var bh:int = o[4]:int;
      var ch:int = 3;
      var dh:int = bh << ch;
      var eh:double_ptr = ah + dh;
      eh[0] = zg;
      var fh:int = o[3]:int;
      var gh:int = 1;
      var hh:int = fh + gh;
      o[3]:int = hh;
      continue L_n;
    }
    unreachable;
    label B_m:
    var ih:int = o[4]:int;
    var jh:int = 1;
    var kh:int = ih + jh;
    o[4]:int = kh;
    continue L_l;
  }
  unreachable;
  label B_k:
}

export function submain(a:int, b:int):int {
  var c:int = stack_pointer;
  var d:int = 80;
  var e:int = c - d;
  stack_pointer = e;
  e[19]:int = a;
  e[18]:int = b;
  var f:int = 2000;
  e[17]:int = f;
  var g:long = 4000000L;
  var h:int = 8;
  var i:int = legalfunc_polybench_alloc_data(g, h);
  e[11]:int = i;
  var j:long = 2000L;
  var k:int = 8;
  var l:int = legalfunc_polybench_alloc_data(j, k);
  e[10]:int = l;
  var m:long = 2000L;
  var n:int = 8;
  var o:int = legalfunc_polybench_alloc_data(m, n);
  e[9]:int = o;
  var p:long = 2000L;
  var q:int = 8;
  var r:int = legalfunc_polybench_alloc_data(p, q);
  e[8]:int = r;
  var s:long = 2000L;
  var t:int = 8;
  var u:int = legalfunc_polybench_alloc_data(s, t);
  e[7]:int = u;
  var v:long = 2000L;
  var w:int = 8;
  var x:int = legalfunc_polybench_alloc_data(v, w);
  e[6]:int = x;
  var y:long = 2000L;
  var z:int = 8;
  var aa:int = legalfunc_polybench_alloc_data(y, z);
  e[5]:int = aa;
  var ba:long = 2000L;
  var ca:int = 8;
  var da:int = legalfunc_polybench_alloc_data(ba, ca);
  e[4]:int = da;
  var ea:long = 2000L;
  var fa:int = 8;
  var ga:int = legalfunc_polybench_alloc_data(ea, fa);
  e[3]:int = ga;
  var ha:int = e[17]:int;
  var ia:int = e[11]:int;
  var ja:int = e[10]:int;
  var ka:int = e[9]:int;
  var la:int = e[8]:int;
  var ma:int = e[7]:int;
  var na:int = e[6]:int;
  var oa:int = e[5]:int;
  var pa:int = e[4]:int;
  var qa:int = e[3]:int;
  var ra:int = 56;
  var sa:int = e + ra;
  var ta:int = sa;
  var ua:int = 48;
  var va:int = e + ua;
  var wa:int = va;
  init_array(ha, ta, wa, ia, ja, ka, la, ma, na, oa, pa, qa);
  var xa:int = e[17]:int;
  var ya:double = e[7]:double;
  var za:double = e[6]:double;
  var ab:int = e[11]:int;
  var bb:int = e[10]:int;
  var cb:int = e[9]:int;
  var db:int = e[8]:int;
  var eb:int = e[7]:int;
  var fb:int = e[6]:int;
  var gb:int = e[5]:int;
  var hb:int = e[4]:int;
  var ib:int = e[3]:int;
  kernel_gemver(xa, ya, za, ab, bb, cb, db, eb, fb, gb, hb, ib);
  var jb:int = e[19]:int;
  var kb:int = 42;
  var lb:int = jb;
  var mb:int = kb;
  var nb:int = lb > mb;
  var ob:int = 1;
  var pb:int = nb & ob;
  if (eqz(pb)) goto B_a;
  var qb:int_ptr = e[18]:int;
  var rb:int = qb[0];
  var sb:int = 87;
  var tb:int = memory_base;
  var ub:int = tb + sb;
  var vb:int = strcmp(rb, ub);
  if (vb) goto B_a;
  var wb:int = e[17]:int;
  var xb:int = e[6]:int;
  print_array(wb, xb);
  label B_a:
  var yb:int = e[11]:int;
  free(yb);
  var zb:int = e[10]:int;
  free(zb);
  var ac:int = e[9]:int;
  free(ac);
  var bc:int = e[8]:int;
  free(bc);
  var cc:int = e[7]:int;
  free(cc);
  var dc:int = e[6]:int;
  free(dc);
  var ec:int = e[5]:int;
  free(ec);
  var fc:int = e[4]:int;
  free(fc);
  var gc:int = e[3]:int;
  free(gc);
  var hc:int = 0;
  var ic:int = 80;
  var jc:int = e + ic;
  stack_pointer = jc;
  return hc;
}

function init_array(a:int, b:int, c:int, d:int, e:int, f:int, g:int, h:int, i:int, j:int, k:int, l:int) {
  var m:int = stack_pointer;
  var n:int = 64;
  var o:{ a:double, b:int, c:int, d:int, e:int, f:int, g:int, h:int, i:int, j:int, k:int, l:int, m:int, n:int, o:int } = 
    m - n;
  o.o = a;
  o.n = b;
  o.m = c;
  o.l = d;
  o.k = e;
  o.j = f;
  o.i = g;
  o.h = h;
  o.g = i;
  o.f = j;
  o.e = k;
  o.d = l;
  var p:double_ptr = o.n;
  var q:double = 1.5;
  p[0] = q;
  var r:double_ptr = o.m;
  var s:double = 1.2;
  r[0] = s;
  var t:int = o.o;
  var u:double = f64_convert_i32_s(t);
  o.a = u;
  var v:int = 0;
  o.c = v;
  loop L_b {
    var w:int = o.c;
    var x:int = o.o;
    var y:int = w;
    var z:int = x;
    var aa:int = y < z;
    var ba:int = 1;
    var ca:int = aa & ba;
    if (eqz(ca)) goto B_a;
    var da:int = o.c;
    var ea:double = f64_convert_i32_s(da);
    var fa:int = o.k;
    var ga:int = o.c;
    var ha:int = 3;
    var ia:int = ga << ha;
    var ja:double_ptr = fa + ia;
    ja[0] = ea;
    var ka:int = o.c;
    var la:int = 1;
    var ma:int = ka + la;
    var na:double = f64_convert_i32_s(ma);
    var oa:double = o.a;
    var pa:double = na / oa;
    var qa:double = 2.0;
    var ra:double = pa / qa;
    var sa:int = o.i;
    var ta:int = o.c;
    var ua:int = 3;
    var va:int = ta << ua;
    var wa:double_ptr = sa + va;
    wa[0] = ra;
    var xa:int = o.c;
    var ya:int = 1;
    var za:int = xa + ya;
    var ab:double = f64_convert_i32_s(za);
    var bb:double = o.a;
    var cb:double = ab / bb;
    var db:double = 4.0;
    var eb:double = cb / db;
    var fb:int = o.j;
    var gb:int = o.c;
    var hb:int = 3;
    var ib:int = gb << hb;
    var jb:double_ptr = fb + ib;
    jb[0] = eb;
    var kb:int = o.c;
    var lb:int = 1;
    var mb:int = kb + lb;
    var nb:double = f64_convert_i32_s(mb);
    var ob:double = o.a;
    var pb:double = nb / ob;
    var qb:double = 6.0;
    var rb:double = pb / qb;
    var sb:int = o.h;
    var tb:int = o.c;
    var ub:int = 3;
    var vb:int = tb << ub;
    var wb:double_ptr = sb + vb;
    wb[0] = rb;
    var xb:int = o.c;
    var yb:int = 1;
    var zb:int = xb + yb;
    var ac:double = f64_convert_i32_s(zb);
    var bc:double = o.a;
    var cc:double = ac / bc;
    var dc:double = 8.0;
    var ec:double = cc / dc;
    var fc:int = o.e;
    var gc:int = o.c;
    var hc:int = 3;
    var ic:int = gc << hc;
    var jc:double_ptr = fc + ic;
    jc[0] = ec;
    var kc:int = o.c;
    var lc:int = 1;
    var mc:int = kc + lc;
    var nc:double = f64_convert_i32_s(mc);
    var oc:double = o.a;
    var pc:double = nc / oc;
    var qc:double = 9.0;
    var rc:double = pc / qc;
    var sc:int = o.d;
    var tc:int = o.c;
    var uc:int = 3;
    var vc:int = tc << uc;
    var wc:double_ptr = sc + vc;
    wc[0] = rc;
    var xc:int = o.f;
    var yc:int = o.c;
    var zc:int = 3;
    var ad:int = yc << zc;
    var bd:double_ptr = xc + ad;
    var cd:int = 0;
    var dd:double = f64_convert_i32_s(cd);
    bd[0] = dd;
    var ed:int = o.g;
    var fd:int = o.c;
    var gd:int = 3;
    var hd:int = fd << gd;
    var id:double_ptr = ed + hd;
    var jd:int = 0;
    var kd:double = f64_convert_i32_s(jd);
    id[0] = kd;
    var ld:int = 0;
    o.b = ld;
    loop L_d {
      var md:int = o.b;
      var nd:int = o.o;
      var od:int = md;
      var pd:int = nd;
      var qd:int = od < pd;
      var rd:int = 1;
      var sd:int = qd & rd;
      if (eqz(sd)) goto B_c;
      var td:int = o.c;
      var ud:int = o.b;
      var vd:int = td * ud;
      var wd:int = o.o;
      var xd:int = vd % wd;
      var yd:double = f64_convert_i32_s(xd);
      var zd:int = o.o;
      var ae:double = f64_convert_i32_s(zd);
      var be:double = yd / ae;
      var ce:int = o.l;
      var de:int = o.c;
      var ee:int = 16000;
      var fe:int = de * ee;
      var ge:int = ce + fe;
      var he:int = o.b;
      var ie:int = 3;
      var je:int = he << ie;
      var ke:double_ptr = ge + je;
      ke[0] = be;
      var le:int = o.b;
      var me:int = 1;
      var ne:int = le + me;
      o.b = ne;
      continue L_d;
    }
    unreachable;
    label B_c:
    var oe:int = o.c;
    var pe:int = 1;
    var qe:int = oe + pe;
    o.c = qe;
    continue L_b;
  }
  unreachable;
  label B_a:
}

function print_array(a:int, b:int) {
  var c:int = stack_pointer;
  var d:int = 48;
  var e:int = c - d;
  stack_pointer = e;
  e[11]:int = a;
  e[10]:int = b;
  var f:int_ptr = stderr;
  var g:int = f[0];
  var h:int = 42;
  var i:int = memory_base;
  var j:int = i + h;
  var k:int = 0;
  fprintf(g, j, k);
  var l:int = f[0];
  var m:int = 0;
  var n:int = memory_base;
  var o:int = n + m;
  e[8]:int = o;
  var p:int = 2;
  var q:int = n + p;
  var r:int = 32;
  var s:int = e + r;
  fprintf(l, q, s);
  var t:int = 0;
  e[9]:int = t;
  loop L_b {
    var u:int = e[9]:int;
    var v:int = e[11]:int;
    var w:int = u;
    var x:int = v;
    var y:int = w < x;
    var z:int = 1;
    var aa:int = y & z;
    if (eqz(aa)) goto B_a;
    var ba:int = e[9]:int;
    var ca:int = 20;
    var da:int = ba % ca;
    if (da) goto B_c;
    var ea:int_ptr = stderr;
    var fa:int = ea[0];
    var ga:int = 86;
    var ha:int = memory_base;
    var ia:int = ha + ga;
    var ja:int = 0;
    fprintf(fa, ia, ja);
    label B_c:
    var ka:int_ptr = stderr;
    var la:int = ka[0];
    var ma:int = e[10]:int;
    var na:int = e[9]:int;
    var oa:int = 3;
    var pa:int = na << oa;
    var qa:double_ptr = ma + pa;
    var ra:double = qa[0];
    e[0]:double = ra;
    var sa:int = 17;
    var ta:int = memory_base;
    var ua:int = ta + sa;
    fprintf(la, ua, e);
    var va:int = e[9]:int;
    var wa:int = 1;
    var xa:int = va + wa;
    e[9]:int = xa;
    continue L_b;
  }
  unreachable;
  label B_a:
  var ya:int_ptr = stderr;
  var za:int = ya[0];
  var ab:int = 0;
  var bb:int = memory_base;
  var cb:int = bb + ab;
  e[4]:int = cb;
  var db:int = 25;
  var eb:int = bb + db;
  var fb:int = 16;
  var gb:int = e + fb;
  fprintf(za, eb, gb);
  var hb:int = ya[0];
  var ib:int = 65;
  var jb:int = memory_base;
  var kb:int = jb + ib;
  var lb:int = 0;
  fprintf(hb, kb, lb);
  var mb:int = 48;
  var nb:int = e + mb;
  stack_pointer = nb;
}

function legalfunc_polybench_alloc_data(a:long, b:int):int {
  return legalimport_polybench_alloc_data(i32_wrap_i64(a),
                                          i32_wrap_i64(a >> 32L),
                                          b)
}

