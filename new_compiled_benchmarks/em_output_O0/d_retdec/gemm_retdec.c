//
// This file was generated by the Retargetable Decompiler
// Website: https://retdec.com
//

#include <stdint.h>
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

// ---------------- Integer Types Definitions -----------------

typedef int64_t int128_t;

// ----------------- Float Types Definitions ------------------

typedef double float64_t;

// ------------------- Function Prototypes --------------------

int64_t fprintf(int64_t a1, char * a2, int64_t a3, int64_t a4, int128_t a5);
int64_t free(float64_t (*a1)[1]);
void init_array(uint32_t ni, uint32_t nj, uint32_t nk, float64_t * alpha, float64_t * beta, float64_t (*C)[1], float64_t (*A)[1], float64_t (*B)[1]);
int64_t kernel_gemm(int64_t a1, int64_t a2, int64_t a3, int64_t a4, int64_t a5, int64_t a6);
int64_t polybench_alloc_data(int64_t a1, int64_t a2);
void print_array(uint32_t ni, uint32_t nj, float64_t (*C)[1]);
int64_t strcmp(int64_t a1, int64_t * a2);
int32_t submain(int32_t argc, char ** argv);

// --------------------- Global Variables ---------------------

int64_t g1 = 0x4e494745423d3d00; // 0x558
int64_t g2 = 0x322e3025000a0043; // 0x57f

// ------------------------ Functions -------------------------

// Address range: 0x0 - 0x13b
int64_t kernel_gemm(int64_t a1, int64_t a2, int64_t a3, int64_t a4, int64_t a5, int64_t a6) {
    // 0x0
    int128_t v1; // 0x0
    int64_t v2 = __asm_movsd_1(v1); // 0xd
    int64_t v3 = __asm_movsd_1(v1); // 0x12
    if ((int32_t)a1 <= 0) {
        // 0x139
        return 0;
    }
    int64_t v4 = a2 & 0xffffffff;
    int64_t result = a1 & 0xffffffff;
    int64_t v5 = 0;
    int64_t v6; // 0x0
    int128_t v7; // 0x49
    int64_t * v8; // 0x64
    if ((int32_t)a2 > 0) {
        // 0x49
        v6 = 0;
        v7 = __asm_movsd(v3);
        v8 = (int64_t *)(0x2260 * v5 + a4 + 8 * v6);
        *v8 = __asm_movsd_1(__asm_mulsd(v7, *v8));
        v6++;
        while (v6 != v4) {
            // 0x49
            v7 = __asm_movsd(v3);
            v8 = (int64_t *)(0x2260 * v5 + a4 + 8 * v6);
            *v8 = __asm_movsd_1(__asm_mulsd(v7, *v8));
            v6++;
        }
    }
    int64_t v9; // 0x0
    int64_t v10; // 0x0
    int64_t v11; // 0x0
    int64_t v12; // 0x0
    int64_t v13; // 0x0
    int128_t v14; // 0xbd
    int64_t v15; // 0xd8
    int128_t v16; // 0xd8
    int64_t * v17; // 0xf3
    if ((int32_t)a3 > 0) {
        // 0x96
        v12 = 0x2580 * v5 + a5;
        v13 = 0x2260 * v5 + a4;
        v9 = 0;
        if ((int32_t)a2 > 0) {
            // 0xa2
            v10 = 0;
            v14 = __asm_mulsd(__asm_movsd(v2), *(int64_t *)(v12 + 8 * v9));
            v15 = 8 * v10;
            v16 = __asm_movsd(*(int64_t *)(0x2260 * v9 + a6 + v15));
            v17 = (int64_t *)(v13 + v15);
            *v17 = __asm_movsd_1(__asm_addsd(__asm_mulsd_2(v14, v16), __asm_movsd(*v17)));
            v10++;
            while (v10 != v4) {
                // 0xa2
                v14 = __asm_mulsd(__asm_movsd(v2), *(int64_t *)(v12 + 8 * v9));
                v15 = 8 * v10;
                v16 = __asm_movsd(*(int64_t *)(0x2260 * v9 + a6 + v15));
                v17 = (int64_t *)(v13 + v15);
                *v17 = __asm_movsd_1(__asm_addsd(__asm_mulsd_2(v14, v16), __asm_movsd(*v17)));
                v10++;
            }
        }
        // 0x118
        v11 = v9 + 1;
        while (v11 != (a3 & 0xffffffff)) {
            // 0x96
            v9 = v11;
            if ((int32_t)a2 > 0) {
                // 0xa2
                v10 = 0;
                v14 = __asm_mulsd(__asm_movsd(v2), *(int64_t *)(v12 + 8 * v9));
                v15 = 8 * v10;
                v16 = __asm_movsd(*(int64_t *)(0x2260 * v9 + a6 + v15));
                v17 = (int64_t *)(v13 + v15);
                *v17 = __asm_movsd_1(__asm_addsd(__asm_mulsd_2(v14, v16), __asm_movsd(*v17)));
                v10++;
                while (v10 != v4) {
                    // 0xa2
                    v14 = __asm_mulsd(__asm_movsd(v2), *(int64_t *)(v12 + 8 * v9));
                    v15 = 8 * v10;
                    v16 = __asm_movsd(*(int64_t *)(0x2260 * v9 + a6 + v15));
                    v17 = (int64_t *)(v13 + v15);
                    *v17 = __asm_movsd_1(__asm_addsd(__asm_mulsd_2(v14, v16), __asm_movsd(*v17)));
                    v10++;
                }
            }
            // 0x118
            v11 = v9 + 1;
        }
    }
    int64_t v18 = v5 + 1;
    while (v18 != result) {
        // 0x3d
        v5 = v18;
        if ((int32_t)a2 > 0) {
            // 0x49
            v6 = 0;
            v7 = __asm_movsd(v3);
            v8 = (int64_t *)(0x2260 * v5 + a4 + 8 * v6);
            *v8 = __asm_movsd_1(__asm_mulsd(v7, *v8));
            v6++;
            while (v6 != v4) {
                // 0x49
                v7 = __asm_movsd(v3);
                v8 = (int64_t *)(0x2260 * v5 + a4 + 8 * v6);
                *v8 = __asm_movsd_1(__asm_mulsd(v7, *v8));
                v6++;
            }
        }
        if ((int32_t)a3 > 0) {
            // 0x96
            v12 = 0x2580 * v5 + a5;
            v13 = 0x2260 * v5 + a4;
            v9 = 0;
            if ((int32_t)a2 > 0) {
                // 0xa2
                v10 = 0;
                v14 = __asm_mulsd(__asm_movsd(v2), *(int64_t *)(v12 + 8 * v9));
                v15 = 8 * v10;
                v16 = __asm_movsd(*(int64_t *)(0x2260 * v9 + a6 + v15));
                v17 = (int64_t *)(v13 + v15);
                *v17 = __asm_movsd_1(__asm_addsd(__asm_mulsd_2(v14, v16), __asm_movsd(*v17)));
                v10++;
                while (v10 != v4) {
                    // 0xa2
                    v14 = __asm_mulsd(__asm_movsd(v2), *(int64_t *)(v12 + 8 * v9));
                    v15 = 8 * v10;
                    v16 = __asm_movsd(*(int64_t *)(0x2260 * v9 + a6 + v15));
                    v17 = (int64_t *)(v13 + v15);
                    *v17 = __asm_movsd_1(__asm_addsd(__asm_mulsd_2(v14, v16), __asm_movsd(*v17)));
                    v10++;
                }
            }
            // 0x118
            v11 = v9 + 1;
            while (v11 != (a3 & 0xffffffff)) {
                // 0x96
                v9 = v11;
                if ((int32_t)a2 > 0) {
                    // 0xa2
                    v10 = 0;
                    v14 = __asm_mulsd(__asm_movsd(v2), *(int64_t *)(v12 + 8 * v9));
                    v15 = 8 * v10;
                    v16 = __asm_movsd(*(int64_t *)(0x2260 * v9 + a6 + v15));
                    v17 = (int64_t *)(v13 + v15);
                    *v17 = __asm_movsd_1(__asm_addsd(__asm_mulsd_2(v14, v16), __asm_movsd(*v17)));
                    v10++;
                    while (v10 != v4) {
                        // 0xa2
                        v14 = __asm_mulsd(__asm_movsd(v2), *(int64_t *)(v12 + 8 * v9));
                        v15 = 8 * v10;
                        v16 = __asm_movsd(*(int64_t *)(0x2260 * v9 + a6 + v15));
                        v17 = (int64_t *)(v13 + v15);
                        *v17 = __asm_movsd_1(__asm_addsd(__asm_mulsd_2(v14, v16), __asm_movsd(*v17)));
                        v10++;
                    }
                }
                // 0x118
                v11 = v9 + 1;
            }
        }
        // 0x12b
        v18 = v5 + 1;
    }
    // 0x139
    return result;
}

// Address range: 0x140 - 0x244
// Line range:    102 - 145
int32_t submain(int32_t argc, char ** argv) {
    int64_t v1 = polybench_alloc_data(0x10c8e0, 8); // 0x16e
    int64_t v2 = polybench_alloc_data(0x124f80, 8); // 0x181
    int64_t v3 = polybench_alloc_data(0x142440, 8); // 0x194
    float64_t alpha; // bp-48, 0x140
    float64_t beta; // bp-56, 0x140
    init_array(1000, 1100, 1200, &alpha, &beta, &((float64_t (*)[1][1])v1)[0], &((float64_t (*)[1][1])v2)[0], &((float64_t (*)[1][1])v3)[0]);
    __asm_movsd((int64_t)alpha);
    __asm_movsd((int64_t)beta);
    if (argc < 43) {
        // 0x221
        free(&((float64_t (*)[1][1])v1)[0]);
        free(&((float64_t (*)[1][1])v2)[0]);
        free(&((float64_t (*)[1][1])v3)[0]);
        return 0;
    }
    // 0x1f6
    if ((int32_t)strcmp(1100, &g1) == 0) {
        // 0x212
        print_array(1000, 1100, &((float64_t (*)[1][1])v1)[0]);
    }
    // 0x221
    free(&((float64_t (*)[1][1])v1)[0]);
    free(&((float64_t (*)[1][1])v2)[0]);
    free(&((float64_t (*)[1][1])v3)[0]);
    return 0;
}

// Address range: 0x250 - 0x40e
// Line range:    26 - 46
void init_array(uint32_t ni, uint32_t nj, uint32_t nk, float64_t * alpha, float64_t * beta, float64_t (*C)[1], float64_t (*A)[1], float64_t (*B)[1]) {
    // 0x250
    *alpha = (float64_t)__asm_movsd_1(__asm_movsd(0x3ff8000000000000));
    *beta = (float64_t)__asm_movsd_1(__asm_movsd(0x3ff3333333333333));
    if (ni > 0) {
        int64_t v1 = ni;
        int64_t v2 = 0;
        int64_t v3; // 0x250
        int32_t v4; // 0x2be
        int128_t v5; // 0x2c5
        int64_t v6; // 0x250
        if (nj > 0) {
            // 0x2b7
            v6 = 0x2260 * v2 + (0x100000000 * (int64_t)C >> 32);
            v3 = 0;
            v4 = (int32_t)v3 * (int32_t)v2 + 1;
            v5 = __asm_cvtsi2sd((int32_t)((0x100000000 * (int64_t)(v4 >> 31) | (int64_t)v4) % v1));
            *(int64_t *)(v6 + 8 * v3) = __asm_movsd_1(__asm_divsd(v5, __asm_cvtsi2sd(ni)));
            v3++;
            while (v3 != (int64_t)nj) {
                // 0x2b7
                v4 = (int32_t)v3 * (int32_t)v2 + 1;
                v5 = __asm_cvtsi2sd((int32_t)((0x100000000 * (int64_t)(v4 >> 31) | (int64_t)v4) % v1));
                *(int64_t *)(v6 + 8 * v3) = __asm_movsd_1(__asm_divsd(v5, __asm_cvtsi2sd(ni)));
                v3++;
            }
        }
        int64_t v7 = v2 + 1;
        while (v7 != v1) {
            // 0x2ab
            v2 = v7;
            if (nj > 0) {
                // 0x2b7
                v6 = 0x2260 * v2 + (0x100000000 * (int64_t)C >> 32);
                v3 = 0;
                v4 = (int32_t)v3 * (int32_t)v2 + 1;
                v5 = __asm_cvtsi2sd((int32_t)((0x100000000 * (int64_t)(v4 >> 31) | (int64_t)v4) % v1));
                *(int64_t *)(v6 + 8 * v3) = __asm_movsd_1(__asm_divsd(v5, __asm_cvtsi2sd(ni)));
                v3++;
                while (v3 != (int64_t)nj) {
                    // 0x2b7
                    v4 = (int32_t)v3 * (int32_t)v2 + 1;
                    v5 = __asm_cvtsi2sd((int32_t)((0x100000000 * (int64_t)(v4 >> 31) | (int64_t)v4) % v1));
                    *(int64_t *)(v6 + 8 * v3) = __asm_movsd_1(__asm_divsd(v5, __asm_cvtsi2sd(ni)));
                    v3++;
                }
            }
            // 0x300
            v7 = v2 + 1;
        }
        int64_t v8 = nk;
        int64_t v9 = 0;
        int64_t v10; // 0x250
        int64_t v11; // 0x250
        int64_t v12; // 0x250
        int32_t v13; // 0x33d
        int128_t v14; // 0x344
        if (nk > 0) {
            // 0x334
            v12 = 0x2580 * v9 + (int64_t)A;
            v10 = 0;
            v11 = v10 + 1;
            v13 = (int32_t)v11 * (int32_t)v9;
            v14 = __asm_cvtsi2sd((int32_t)((0x100000000 * (int64_t)(v13 >> 31) | (int64_t)v13) % v8));
            *(int64_t *)(v12 + 8 * v10) = __asm_movsd_1(__asm_divsd(v14, __asm_cvtsi2sd(nk)));
            while (v11 != v8) {
                // 0x334
                v10 = v11;
                v11 = v10 + 1;
                v13 = (int32_t)v11 * (int32_t)v9;
                v14 = __asm_cvtsi2sd((int32_t)((0x100000000 * (int64_t)(v13 >> 31) | (int64_t)v13) % v8));
                *(int64_t *)(v12 + 8 * v10) = __asm_movsd_1(__asm_divsd(v14, __asm_cvtsi2sd(nk)));
            }
        }
        int64_t v15 = v9 + 1;
        while (v15 != v1) {
            // 0x328
            v9 = v15;
            if (nk > 0) {
                // 0x334
                v12 = 0x2580 * v9 + (int64_t)A;
                v10 = 0;
                v11 = v10 + 1;
                v13 = (int32_t)v11 * (int32_t)v9;
                v14 = __asm_cvtsi2sd((int32_t)((0x100000000 * (int64_t)(v13 >> 31) | (int64_t)v13) % v8));
                *(int64_t *)(v12 + 8 * v10) = __asm_movsd_1(__asm_divsd(v14, __asm_cvtsi2sd(nk)));
                while (v11 != v8) {
                    // 0x334
                    v10 = v11;
                    v11 = v10 + 1;
                    v13 = (int32_t)v11 * (int32_t)v9;
                    v14 = __asm_cvtsi2sd((int32_t)((0x100000000 * (int64_t)(v13 >> 31) | (int64_t)v13) % v8));
                    *(int64_t *)(v12 + 8 * v10) = __asm_movsd_1(__asm_divsd(v14, __asm_cvtsi2sd(nk)));
                }
            }
            // 0x37f
            v15 = v9 + 1;
        }
    }
    if (nk <= 0) {
        // 0x40c
        return;
    }
    int64_t v16 = nj;
    int64_t v17 = 0;
    int64_t v18; // 0x250
    int32_t v19; // 0x3bc
    int128_t v20; // 0x3c3
    int64_t v21; // 0x3e6
    if (nj > 0) {
        // 0x3b3
        v18 = 0;
        v19 = ((int32_t)v18 + 2) * (int32_t)v17;
        v20 = __asm_cvtsi2sd((int32_t)((0x100000000 * (int64_t)(v19 >> 31) | (int64_t)v19) % v16));
        v21 = __asm_movsd_1(__asm_divsd(v20, __asm_cvtsi2sd(nj)));
        *(int64_t *)(0x2260 * v17 + (int64_t)B + 8 * v18) = v21;
        v18++;
        while (v18 != v16) {
            // 0x3b3
            v19 = ((int32_t)v18 + 2) * (int32_t)v17;
            v20 = __asm_cvtsi2sd((int32_t)((0x100000000 * (int64_t)(v19 >> 31) | (int64_t)v19) % v16));
            v21 = __asm_movsd_1(__asm_divsd(v20, __asm_cvtsi2sd(nj)));
            *(int64_t *)(0x2260 * v17 + (int64_t)B + 8 * v18) = v21;
            v18++;
        }
    }
    int64_t v22 = v17 + 1;
    while (v22 != (int64_t)nk) {
        // 0x3a7
        v17 = v22;
        if (nj > 0) {
            // 0x3b3
            v18 = 0;
            v19 = ((int32_t)v18 + 2) * (int32_t)v17;
            v20 = __asm_cvtsi2sd((int32_t)((0x100000000 * (int64_t)(v19 >> 31) | (int64_t)v19) % v16));
            v21 = __asm_movsd_1(__asm_divsd(v20, __asm_cvtsi2sd(nj)));
            *(int64_t *)(0x2260 * v17 + (int64_t)B + 8 * v18) = v21;
            v18++;
            while (v18 != v16) {
                // 0x3b3
                v19 = ((int32_t)v18 + 2) * (int32_t)v17;
                v20 = __asm_cvtsi2sd((int32_t)((0x100000000 * (int64_t)(v19 >> 31) | (int64_t)v19) % v16));
                v21 = __asm_movsd_1(__asm_divsd(v20, __asm_cvtsi2sd(nj)));
                *(int64_t *)(0x2260 * v17 + (int64_t)B + 8 * v18) = v21;
                v18++;
            }
        }
        // 0x3fe
        v22 = v17 + 1;
    }
}

// Address range: 0x410 - 0x543
// Line range:    52 - 66
void print_array(uint32_t ni, uint32_t nj, float64_t (*C)[1]) {
    int64_t v1 = (int64_t)C;
    int64_t v2; // 0x410
    int128_t v3; // 0x410
    fprintf(*(int64_t *)*(int64_t *)1065, "==BEGIN DUMP_ARRAYS==\n", v1, v2, v3);
    int64_t stream = *(int64_t *)*(int64_t *)1089; // 0x441
    fprintf(stream, "begin dump: %s", (int64_t)&g2, v2, v3);
    int64_t v4; // 0x410
    int128_t v5; // 0x410
    if (ni > 0) {
        int64_t v6 = 0;
        int128_t v7; // 0x410
        int128_t v8 = v7; // 0x479
        int64_t v9; // 0x410
        int64_t v10 = v9; // 0x479
        int64_t v11; // 0x410
        int64_t v12; // 0x410
        int64_t v13; // 0x410
        int32_t v14; // 0x486
        int64_t v15; // 0x48f
        int64_t v16; // 0x48f
        int128_t v17; // 0x4d2
        int128_t v18; // 0x410
        if (nj > 0) {
            // 0x47f
            v13 = 0x2260 * v6 + (0x100000000 * v1 >> 32);
            v12 = 0;
            v14 = (int32_t)v6 * ni + (int32_t)v12;
            v15 = (0x100000000 * (int64_t)(v14 >> 31) | (int64_t)v14) % 20;
            v16 = v15 & 0xffffffff;
            if ((int32_t)v15 == 0) {
                // 0x49a
                fprintf(*(int64_t *)*(int64_t *)1185, "\n", v16, 20, v7);
            }
            // 0x4b2
            v17 = __asm_movsd(*(int64_t *)(v13 + 8 * v12));
            fprintf(*(int64_t *)*(int64_t *)1209, "%0.2lf ", v16, v12, v17);
            v11 = v12 + 1;
            v18 = v17;
            v8 = v17;
            v10 = v12;
            while (v11 != (int64_t)nj) {
                // 0x47f
                v12 = v11;
                v14 = (int32_t)v6 * ni + (int32_t)v12;
                v15 = (0x100000000 * (int64_t)(v14 >> 31) | (int64_t)v14) % 20;
                v16 = v15 & 0xffffffff;
                if ((int32_t)v15 == 0) {
                    // 0x49a
                    fprintf(*(int64_t *)*(int64_t *)1185, "\n", v16, 20, v18);
                }
                // 0x4b2
                v17 = __asm_movsd(*(int64_t *)(v13 + 8 * v12));
                fprintf(*(int64_t *)*(int64_t *)1209, "%0.2lf ", v16, v12, v17);
                v11 = v12 + 1;
                v18 = v17;
                v8 = v17;
                v10 = v12;
            }
        }
        int64_t v19 = v6 + 1;
        v9 = v10;
        v5 = v8;
        v4 = v10;
        while (v19 != (int64_t)ni) {
            int128_t v20 = v8;
            v6 = v19;
            v8 = v20;
            v10 = v9;
            if (nj > 0) {
                // 0x47f
                v13 = 0x2260 * v6 + (0x100000000 * v1 >> 32);
                v18 = v20;
                v12 = 0;
                v14 = (int32_t)v6 * ni + (int32_t)v12;
                v15 = (0x100000000 * (int64_t)(v14 >> 31) | (int64_t)v14) % 20;
                v16 = v15 & 0xffffffff;
                if ((int32_t)v15 == 0) {
                    // 0x49a
                    fprintf(*(int64_t *)*(int64_t *)1185, "\n", v16, 20, v18);
                }
                // 0x4b2
                v17 = __asm_movsd(*(int64_t *)(v13 + 8 * v12));
                fprintf(*(int64_t *)*(int64_t *)1209, "%0.2lf ", v16, v12, v17);
                v11 = v12 + 1;
                v18 = v17;
                v8 = v17;
                v10 = v12;
                while (v11 != (int64_t)nj) {
                    // 0x47f
                    v12 = v11;
                    v14 = (int32_t)v6 * ni + (int32_t)v12;
                    v15 = (0x100000000 * (int64_t)(v14 >> 31) | (int64_t)v14) % 20;
                    v16 = v15 & 0xffffffff;
                    if ((int32_t)v15 == 0) {
                        // 0x49a
                        fprintf(*(int64_t *)*(int64_t *)1185, "\n", v16, 20, v18);
                    }
                    // 0x4b2
                    v17 = __asm_movsd(*(int64_t *)(v13 + 8 * v12));
                    fprintf(*(int64_t *)*(int64_t *)1209, "%0.2lf ", v16, v12, v17);
                    v11 = v12 + 1;
                    v18 = v17;
                    v8 = v17;
                    v10 = v12;
                }
            }
            // 0x4f8
            v19 = v6 + 1;
            v9 = v10;
            v5 = v8;
            v4 = v10;
        }
    }
    int64_t stream2 = *(int64_t *)*(int64_t *)1293; // 0x50d
    fprintf(stream2, "\nend   dump: %s\n", (int64_t)&g2, v4, v5);
    int64_t stream3 = *(int64_t *)*(int64_t *)1324; // 0x52c
    fprintf(stream3, "==END   DUMP_ARRAYS==\n", (int64_t)&g2, v4, v5);
}

// --------------------- Meta-Information ---------------------

// Detected compiler/packer: llvm (17.0.0)
// Detected functions: 4

